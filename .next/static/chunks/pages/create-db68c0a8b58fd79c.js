(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[417],{9782:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/create",function(){return l(2035)}])},2035:function(e,t,l){"use strict";l.r(t),l.d(t,{Create:function(){return K},default:function(){return L}});var n=l(5893),r=l(9094),s=l(856),i=l(5281),a=l(1293),o=l(3090),u=l(7169),d=l(9371),c=l(5460),m=l(7747),h=l(4292),x=l(9981),f=l(6070),w=l(3108),g=l(3484),j=l(7294);let p=e=>{var t;return(0,n.jsx)(w.z,{width:null!==(t=e.width)&&void 0!==t?t:"100%",color:"white",bg:g.O.key,onClick:e.onClick,isLoading:e.isLoading,mb:3,children:e.text})},b=e=>{let{handleBasicInfoInput:t,image:l,resultCount:r,queryCount:s,answerCount:w,next:g}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(i.K,{children:[(0,n.jsxs)(i.K,{direction:{base:"column",md:"row"},w:"full",alignItems:"flex-start",mb:{base:5,md:10},children:[(0,n.jsxs)(i.K,{m:2,w:"full",children:[(0,n.jsx)(a.x,{fontSize:"lg",children:"테스트 제목"}),(0,n.jsx)(o.I,{name:"title",onChange:t,placeholder:"심리테스트 제목을 입력해주세요."}),(0,n.jsx)(a.x,{fontSize:"lg",children:"테스트 설명"}),(0,n.jsx)(u.g,{name:"description",onChange:t,rows:12,placeholder:"심리테스트에 대한 설명을 입력해주세요."})]}),(0,n.jsxs)(i.K,{m:2,w:"full",alignItems:"flex-start",children:[(0,n.jsx)(a.x,{fontSize:"lg",children:"테스트 이미지"}),(0,n.jsxs)(d.l,{w:"full",aspectRatio:3/4,borderRadius:4,bg:"gray.200",children:[""!==l?(0,n.jsx)(c.E,{w:"full",h:"full",objectFit:"cover",borderRadius:4,src:l,alt:"심리테스트 이미지"}):(0,n.jsx)(m.xu,{w:"full",h:"full",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",color:"gray.400",children:(0,n.jsxs)(a.x,{children:["이미지를 업로드해주세요.",(0,n.jsx)("br",{}),"(3:4 비율 권장)"]})}),(0,n.jsx)(o.I,{name:"image",onChange:t,hidden:!0,type:"file",accept:"image/*"})]})]})]}),(0,n.jsxs)(i.K,{width:"full",direction:{base:"column",md:"row"},mb:{base:5,md:10},children:[(0,n.jsxs)(i.K,{w:"full",children:[(0,n.jsxs)(h.U,{children:[(0,n.jsx)(a.x,{children:"결과 수"}),(0,n.jsx)(x.u,{mx:10,label:"테스트 진행 후 사용자에게 보여질 수 있는 결과 수 입니다.(3~5개)",children:(0,n.jsx)(f.h,{})})]}),(0,n.jsx)(o.I,{"aria-label":"테스트 결과 수",name:"resultCount",onChange:t,placeholder:"결과 수 (3~5개)",type:"number",max:5,min:3})]}),(0,n.jsxs)(i.K,{w:"full",children:[(0,n.jsxs)(h.U,{children:[(0,n.jsx)(a.x,{children:"질문 수"}),(0,n.jsx)(x.u,{mx:10,label:"사용자가 진행할 질문 수입니다. (3~5개)",children:(0,n.jsx)(f.h,{})})]}),(0,n.jsx)(o.I,{name:"queryCount",onChange:t,value:s,placeholder:"질문 수",type:"number",max:5,min:3})]}),(0,n.jsxs)(i.K,{w:"full",children:[(0,n.jsxs)(h.U,{children:[(0,n.jsx)(a.x,{children:"응답 수"}),(0,n.jsx)(x.u,{mx:10,label:"사용자가 진행할 질문의 대답의 수입니다. (2~4개)",children:(0,n.jsx)(f.h,{})})]}),(0,n.jsx)(o.I,{name:"answerCount",onChange:t,placeholder:"질문 수",type:"number",max:4,min:2})]})]})]}),(0,n.jsx)(p,{onClick:g,text:"다음"})]})};var I=l(7793);let v=()=>{let[e,t]=(0,j.useState)(0),[l,n]=j.useState({title:"",description:"",image:"",resultCount:3,queryCount:3,answerCount:2}),[r,s]=j.useState([]),[i,a]=j.useState([]),[o,u]=(0,j.useState)(0),[d,c]=(0,j.useState)(0);(0,j.useEffect)(()=>{},[]);let m=()=>{f(),w(),t(e=>e+1)},h=()=>{t(e=>e+1)},x=()=>{console.log("basicInfo",l),console.log("resultItems",r),console.log("queryItems",i)},f=()=>{let e=[];for(let t=0;t<l.resultCount;t++)e.push({title:"",description:"",image:""});s(e)},w=()=>{let e=[];for(let t=0;t<l.queryCount;t++)e.push({step:t+1,text:"",answers:[]});e.map(e=>{for(let t=0;t<l.answerCount;t++)e.answers.push({text:"",resultIndex:0})}),a(e)},g=async e=>{u(e),await new Promise(e=>setTimeout(e,0));let t=document.getElementById("result-item-list");if(!t){console.error("Element not found");return}await I.Z.smoothScroll(t,t.offsetWidth*e,0,300)},p=async e=>{c(e),await new Promise(e=>setTimeout(e,0));let t=document.getElementById("query-item-list");if(!t){console.error("Element not found");return}await I.Z.smoothScroll(t,t.offsetWidth*e,0,300)};return{basicInfo:l,resultItems:r,queryItems:i,handleBasicInfoInput:e=>{let t=e.target.value;n(l=>{let r={...l};switch(e.target.name){case"title":case"description":r[e.target.name]=t;break;case"image":var s;let i=e.target,a=null===(s=i.files)||void 0===s?void 0:s[0];if(a){let e=new FileReader;e.onloadend=()=>{n(t=>({...t,image:e.result}))},e.readAsDataURL(a)}break;case"resultCount":case"queryCount":case"answerCount":let o=e.target,u=Number(o.max),d=Number(o.min),c=Number(t);c>u&&(c=u),c<d&&(c=d),r[e.target.name]=c}return r})},handleResultItemInput:e=>{let t=e.target.dataset.index,l=Number(t),n=e.target.value;s(t=>{let r=[...t];switch(e.target.id){case"result-item-title":r[l].title=n;break;case"result-item-image":var i;let a=e.target,o=null===(i=a.files)||void 0===i?void 0:i[0];if(o){let e=new FileReader;e.onloadend=()=>{r[l].image=e.result,s(r)},e.readAsDataURL(o)}}return r})},handleQueryItemInput:e=>{let t=e.target.dataset.index,l=Number(t),n=e.target.value;a(t=>{let r=[...t];switch(e.target.id){case"query-item-text":r[l].text=n;break;case"query-item-answer":r[d].answers[l].text=n;break;case"query-item-result":r[d].answers[l].resultIndex=Number(n)}return console.log(r),r})},handleResultHtmlInput:e=>{s(t=>{let l=[...t];return l[o].description=e,l})},resultShowIndex:o,setResultScroll:g,queryShowIndex:d,setQueryScroll:p,step:e,next:()=>{switch(e){case 0:m();break;case 1:h();break;case 2:x()}}}};var y=l(8371),C=l(1731),S=l(2757),q=l(5152),k=l.n(q);let E=k()(()=>Promise.all([l.e(937),l.e(876),l.e(167)]).then(l.t.bind(l,1167,23)),{loadableGenerated:{webpack:()=>[1167]},ssr:!1,loading:()=>(0,n.jsx)("p",{children:"Loading ..."})}),K=()=>{let e=v(),{auth:t}=(0,r.a)(),{toMain:l}=(0,s.q)();return(0,j.useEffect)(()=>{t||l()},[t,l]),(0,n.jsxs)(i.K,{height:"80%",w:"full",children:[(0,n.jsx)(S.X,{fontSize:"3xl",mb:5,children:"생성하기"}),(0,n.jsx)(i.K,{children:0===e.step?(0,n.jsx)(b,{handleBasicInfoInput:e.handleBasicInfoInput,image:e.basicInfo.image,resultCount:e.basicInfo.resultCount,queryCount:e.basicInfo.queryCount,answerCount:e.basicInfo.answerCount,next:e.next}):1===e.step?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.U,{mb:10,children:e.resultItems.map((t,l)=>(0,n.jsx)(y.Vp,{onClick:()=>e.setResultScroll(l),cursor:"pointer",colorScheme:e.resultShowIndex===l?"blue":"gray",children:l+1},l))}),(0,n.jsx)(i.K,{width:"full",overflow:"hidden",id:"result-item-list",children:(0,n.jsx)(i.K,{direction:"row",w:"calc(100% * ".concat(e.resultItems.length,")"),alignItems:"flex-start",mb:{base:5,md:10},children:e.resultItems.map((t,l)=>{var r,s,u;return(0,n.jsxs)(i.K,{id:"result-item-".concat(l),w:"100%",children:[(0,n.jsx)(a.x,{fontSize:"lg",children:"결과 이름"}),(0,n.jsx)(o.I,{id:"result-item-title",onChange:e.handleResultItemInput,"data-index":l,value:null===(r=e.resultItems[l])||void 0===r?void 0:r.title,placeholder:"심리테스트 제목을 입력해주세요.",mb:5}),(0,n.jsx)(a.x,{fontSize:"lg",children:"결과 이미지"}),(0,n.jsx)(m.xu,{mb:5,children:(0,n.jsxs)(d.l,{m:"auto",maxW:{base:"full",md:"200px"},aspectRatio:3/4,borderRadius:4,bg:"gray.200",children:[""!==e.basicInfo.image?(0,n.jsx)(c.E,{w:"full",h:"full",objectFit:"cover",borderRadius:4,src:null===(s=e.resultItems[l])||void 0===s?void 0:s.image,alt:"심리테스트 이미지"}):(0,n.jsx)(m.xu,{w:"full",h:"full",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",color:"gray.400",children:(0,n.jsxs)(a.x,{children:["이미지를 업로드해주세요.",(0,n.jsx)("br",{}),"(3:4 비율 권장)"]})}),(0,n.jsx)(o.I,{id:"result-item-image",onChange:e.handleResultItemInput,hidden:!0,type:"file",accept:"image/*","data-index":l})]})}),(0,n.jsx)(a.x,{fontSize:"lg",children:"테스트 설명"}),(0,n.jsx)(E,{value:null===(u=e.resultItems[l])||void 0===u?void 0:u.description,"data-index":e.resultShowIndex,onChange:e.handleResultHtmlInput})]},l)})})}),(0,n.jsx)(p,{onClick:e.next,text:"다음"})]})}):2===e.step?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.U,{mb:10,children:e.queryItems.map((t,l)=>(0,n.jsx)(y.Vp,{onClick:()=>e.setQueryScroll(l),cursor:"pointer",colorScheme:e.queryShowIndex===l?"blue":"gray",children:l+1},l))}),(0,n.jsx)(i.K,{width:"full",overflow:"hidden",id:"query-item-list",sx:{"&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none",msOverflowStyle:"none"},children:(0,n.jsx)(i.K,{direction:"row",w:"calc(100% * ".concat(e.resultItems.length,")"),alignItems:"flex-start",mb:{base:5,md:10},children:e.resultItems.map((t,l)=>{var r,s;return(0,n.jsxs)(i.K,{id:"result-item-".concat(l),w:"100%",children:[(0,n.jsx)(a.x,{fontSize:"lg",children:"질문"}),(0,n.jsx)(o.I,{id:"query-item-text",onChange:e.handleQueryItemInput,"data-index":l,value:null===(r=e.queryItems[l])||void 0===r?void 0:r.text,placeholder:"질문의 내용을 작성해주세요",mb:5}),(0,n.jsx)(a.x,{fontSize:"lg",children:"답변 / 영향을 주는 결과"}),null===(s=e.queryItems[l])||void 0===s?void 0:s.answers.map((t,r)=>{var s,a;return(0,n.jsxs)(i.K,{w:"full",direction:"row",alignItems:"center",mb:5,children:[(0,n.jsx)(o.I,{id:"query-item-answer",onChange:e.handleQueryItemInput,"data-index":r,value:null===(a=e.queryItems[l])||void 0===a?void 0:null===(s=a.answers[r])||void 0===s?void 0:s.text,placeholder:"질문의 내용을 작성해주세요"}),(0,n.jsx)(C.P,{id:"query-item-result",onChange:e.handleQueryItemInput,"data-index":r,children:e.resultItems.map((e,t)=>(0,n.jsx)("option",{value:t,children:e.title},t))})]},r)})]},l)})})}),(0,n.jsx)(p,{onClick:e.next,text:"제출"})]})}):(0,n.jsx)(n.Fragment,{})})]})};var L=K},7793:function(e,t,l){"use strict";l.d(t,{Z:function(){return n}});class n{}n.smoothScroll=(e,t,l,n)=>{if(!e)return Promise.resolve();if(t=Math.round(t),l=Math.round(l),0===(n=Math.round(n)))return e.scrollLeft=t,e.scrollTop=l,Promise.resolve();let r=Date.now(),s=r+n,i=e.scrollLeft,a=e.scrollTop,o=t-i,u=l-a,d=(e,t,l)=>{if(l<=e)return 0;if(l>=t)return 1;let n=(l-e)/(t-e);return n*n*(3-2*n)},c=e.scrollLeft,m=e.scrollTop;return new Promise(t=>{let l=()=>{let n=Date.now(),h=d(r,s,n),x=Math.round(i+o*h),f=Math.round(a+u*h);if(e.scrollLeft=x,e.scrollTop=f,n>=s||e.scrollLeft===c&&e.scrollTop===m&&(e.scrollLeft!==x||e.scrollTop!==f)){t();return}c=e.scrollLeft,m=e.scrollTop,requestAnimationFrame(l)};requestAnimationFrame(l)})},n.smoothScrollWindow=(e,t,l)=>{let n=window.scrollX,r=window.scrollY,s=e-n,i=t-r,a=performance.now();if(0===l)return window.scrollTo({left:n,top:r,behavior:"auto"}),Promise.resolve();let o=e=>{e.preventDefault()};return new Promise(e=>{let t=u=>{let d=(u-a)/l;d>1&&(d=1);let c=n+s*d,m=r+i*d;window.scrollTo({left:c,top:m,behavior:"auto"}),d<1?requestAnimationFrame(t):(window.removeEventListener("wheel",o),window.removeEventListener("touchstart",o),e())};window.addEventListener("wheel",o,{passive:!1}),window.addEventListener("touchstart",o,{passive:!1}),requestAnimationFrame(t)})}}},function(e){e.O(0,[620,774,888,179],function(){return e(e.s=9782)}),_N_E=e.O()}]);