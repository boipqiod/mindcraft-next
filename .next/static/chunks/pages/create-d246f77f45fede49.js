(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[417],{9782:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/create",function(){return l(2309)}])},2309:function(e,t,l){"use strict";l.r(t),l.d(t,{Create:function(){return S},default:function(){return q}});var n=l(5893),r=l(5281),s=l(1293),i=l(3090),o=l(7169),a=l(6529),u=l(5460),d=l(7747),c=l(4292),m=l(9981),h=l(8371),x=l(1731),f=l(2757),w=l(9227),g=l(1167),j=l.n(g);l(8514);var p=l(7294),I=l(7793);let b=()=>{let[e,t]=(0,p.useState)(0),[l,n]=p.useState({title:"",description:"",image:"",resultCount:3,queryCount:3,answerCount:2}),[r,s]=p.useState([]),[i,o]=p.useState([]),[a,u]=(0,p.useState)(0),[d,c]=(0,p.useState)(0);(0,p.useEffect)(()=>{},[]);let m=()=>{let e=[];for(let t=0;t<l.resultCount;t++)e.push({title:"",description:"",image:""});s(e)},h=()=>{let e=[];for(let t=0;t<l.queryCount;t++)e.push({step:t+1,text:"",answers:[]});e.map(e=>{for(let t=0;t<l.answerCount;t++)e.answers.push({text:"",resultIndex:0})}),o(e)},x=async e=>{u(e),await new Promise(e=>setTimeout(e,0));let t=document.getElementById("result-item-list");if(!t){console.error("Element not found");return}await I.Z.smoothScroll(t,t.offsetWidth*e,0,300)},f=async e=>{c(e),await new Promise(e=>setTimeout(e,0));let t=document.getElementById("query-item-list");if(!t){console.error("Element not found");return}await I.Z.smoothScroll(t,t.offsetWidth*e,0,300)};return{basicInfo:l,resultItems:r,queryItems:i,handleBasicInfoInput:e=>{let t=e.target.value;n(r=>{console.log(l);let s={...r};switch(e.target.id){case"title":s.title=t;break;case"description":s.description=t;break;case"image":var i;let o=e.target,a=null===(i=o.files)||void 0===i?void 0:i[0];if(a){let e=new FileReader;e.onloadend=()=>{n(t=>({...t,image:e.result}))},e.readAsDataURL(a)}break;case"result-count":let u=Number(t.at(t.length-1));u<3&&(u=3),u>5&&(u=5),s.resultCount=u;break;case"query-count":let d=Number(t.at(t.length-1));d<3&&(d=3),d>5&&(d=5),s.queryCount=d;break;case"answer-count":let c=Number(t.at(t.length-1));c<2&&(c=2),c>4&&(c=4),s.answerCount=c}return s})},handleResultItemInput:e=>{let t=e.target.dataset.index,l=Number(t),n=e.target.value;s(t=>{let r=[...t];switch(e.target.id){case"result-item-title":r[l].title=n;break;case"result-item-image":var i;let o=e.target,a=null===(i=o.files)||void 0===i?void 0:i[0];if(a){let e=new FileReader;e.onloadend=()=>{r[l].image=e.result,s(r)},e.readAsDataURL(a)}}return r})},handleQueryItemInput:e=>{let t=e.target.dataset.index,l=Number(t),n=e.target.value;o(t=>{let r=[...t];switch(e.target.id){case"query-item-text":r[l].text=n;break;case"query-item-answer":r[d].answers[l].text=n;break;case"query-item-result":r[d].answers[l].resultIndex=Number(n)}return console.log(r),r})},handleResultHtmlInput:e=>{s(t=>{let l=[...t];return l[a].description=e,l})},resultShowIndex:a,setResultScroll:x,queryShowIndex:d,setQueryScroll:f,step:e,basicInfoNext:()=>{m(),h(),t(e=>e+1)},resultNext:()=>{t(e=>e+1)},submit:()=>{console.log("basicInfo",l),console.log("resultItems",r),console.log("queryItems",i)}}};var v=l(2916),y=l(3484);let C=e=>{var t;return(0,n.jsx)(v.z,{width:null!==(t=e.width)&&void 0!==t?t:"100%",color:"white",bg:y.O.key,onClick:e.onClick,isLoading:e.isLoading,mb:3,children:e.text})},S=()=>{let e=b();return(0,n.jsxs)(r.K,{height:"80%",w:"full",children:[(0,n.jsx)(f.X,{fontSize:"3xl",mb:5,children:"생성하기"}),(0,n.jsx)(r.K,{children:0===e.step?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.K,{children:[(0,n.jsxs)(r.K,{direction:{base:"column",md:"row"},w:"full",alignItems:"flex-start",mb:{base:5,md:10},children:[(0,n.jsxs)(r.K,{m:2,w:"full",children:[(0,n.jsx)(s.x,{fontSize:"lg",children:"테스트 제목"}),(0,n.jsx)(i.I,{id:"title",onChange:e.handleBasicInfoInput,value:e.basicInfo.title,placeholder:"심리테스트 제목을 입력해주세요."}),(0,n.jsx)(s.x,{fontSize:"lg",children:"테스트 설명"}),(0,n.jsx)(o.g,{id:"description",onChange:e.handleBasicInfoInput,value:e.basicInfo.description,rows:12,placeholder:"심리테스트에 대한 설명을 입력해주세요."})]}),(0,n.jsxs)(r.K,{m:2,w:"full",alignItems:"flex-start",children:[(0,n.jsx)(s.x,{fontSize:"lg",children:"테스트 이미지"}),(0,n.jsxs)(a.l,{w:"full",aspectRatio:3/4,borderRadius:4,bg:"gray.200",children:[""!==e.basicInfo.image?(0,n.jsx)(u.E,{w:"full",h:"full",objectFit:"cover",borderRadius:4,src:e.basicInfo.image,alt:"심리테스트 이미지"}):(0,n.jsx)(d.xu,{w:"full",h:"full",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",color:"gray.400",children:(0,n.jsxs)(s.x,{children:["이미지를 업로드해주세요.",(0,n.jsx)("br",{}),"(3:4 비율 권장)"]})}),(0,n.jsx)(i.I,{id:"image",onChange:e.handleBasicInfoInput,hidden:!0,type:"file",accept:"image/*"})]})]})]}),(0,n.jsxs)(r.K,{w:"full",direction:{base:"column",md:"row"},mb:{base:5,md:10},children:[(0,n.jsxs)(r.K,{w:"full",children:[(0,n.jsxs)(c.U,{children:[(0,n.jsx)(s.x,{children:"결과 수"}),(0,n.jsx)(m.u,{mx:10,label:"테스트 진행 후 사용자에게 보여질 수 있는 결과 수 입니다.(3~5개)",children:(0,n.jsx)(w.h,{})})]}),(0,n.jsx)(i.I,{"aria-label":"테스트 결과 수",id:"result-count",onChange:e.handleBasicInfoInput,value:e.basicInfo.resultCount,placeholder:"결과 수 (3~5개)",type:"number",max:5,min:3})]}),(0,n.jsxs)(r.K,{w:"full",children:[(0,n.jsxs)(c.U,{children:[(0,n.jsx)(s.x,{children:"질문 수"}),(0,n.jsx)(m.u,{mx:10,label:"사용자가 진행할 질문 수입니다. (3~5개)",children:(0,n.jsx)(w.h,{})})]}),(0,n.jsx)(i.I,{id:"query-count",onChange:e.handleBasicInfoInput,value:e.basicInfo.queryCount,placeholder:"질문 수",type:"number",max:5,min:3})]}),(0,n.jsxs)(r.K,{w:"full",children:[(0,n.jsxs)(c.U,{children:[(0,n.jsx)(s.x,{children:"응답 수"}),(0,n.jsx)(m.u,{mx:10,label:"사용자가 진행할 질문의 대답의 수입니다. (2~4개)",children:(0,n.jsx)(w.h,{})})]}),(0,n.jsx)(i.I,{id:"answer-count",onChange:e.handleBasicInfoInput,value:e.basicInfo.answerCount,placeholder:"질문 수",type:"number",max:4,min:2})]})]})]}),(0,n.jsx)(C,{onClick:e.basicInfoNext,text:"다음"})]})}):1===e.step?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.U,{mb:10,children:e.resultItems.map((t,l)=>(0,n.jsx)(h.Vp,{onClick:()=>e.setResultScroll(l),cursor:"pointer",colorScheme:e.resultShowIndex===l?"blue":"gray",children:l+1},l))}),(0,n.jsx)(r.K,{width:"full",overflow:"hidden",id:"result-item-list",children:(0,n.jsx)(r.K,{direction:"row",w:"calc(100% * ".concat(e.resultItems.length,")"),alignItems:"flex-start",mb:{base:5,md:10},children:e.resultItems.map((t,l)=>{var o,c,m;return(0,n.jsxs)(r.K,{id:"result-item-".concat(l),w:"100%",children:[(0,n.jsx)(s.x,{fontSize:"lg",children:"결과 이름"}),(0,n.jsx)(i.I,{id:"result-item-title",onChange:e.handleResultItemInput,"data-index":l,value:null===(o=e.resultItems[l])||void 0===o?void 0:o.title,placeholder:"심리테스트 제목을 입력해주세요.",mb:5}),(0,n.jsx)(s.x,{fontSize:"lg",children:"결과 이미지"}),(0,n.jsx)(d.xu,{mb:5,children:(0,n.jsxs)(a.l,{m:"auto",maxW:{base:"full",md:"200px"},aspectRatio:3/4,borderRadius:4,bg:"gray.200",children:[""!==e.basicInfo.image?(0,n.jsx)(u.E,{w:"full",h:"full",objectFit:"cover",borderRadius:4,src:null===(c=e.resultItems[l])||void 0===c?void 0:c.image,alt:"심리테스트 이미지"}):(0,n.jsx)(d.xu,{w:"full",h:"full",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",color:"gray.400",children:(0,n.jsxs)(s.x,{children:["이미지를 업로드해주세요.",(0,n.jsx)("br",{}),"(3:4 비율 권장)"]})}),(0,n.jsx)(i.I,{id:"result-item-image",onChange:e.handleResultItemInput,hidden:!0,type:"file",accept:"image/*","data-index":l})]})}),(0,n.jsx)(s.x,{fontSize:"lg",children:"테스트 설명"}),(0,n.jsx)(j(),{value:null===(m=e.resultItems[l])||void 0===m?void 0:m.description,"data-index":e.resultShowIndex,onChange:e.handleResultHtmlInput})]},l)})})}),(0,n.jsx)(C,{onClick:e.resultNext,text:"다음"})]})}):2===e.step?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.U,{mb:10,children:e.queryItems.map((t,l)=>(0,n.jsx)(h.Vp,{onClick:()=>e.setQueryScroll(l),cursor:"pointer",colorScheme:e.queryShowIndex===l?"blue":"gray",children:l+1},l))}),(0,n.jsx)(r.K,{width:"full",overflow:"hidden",id:"query-item-list",sx:{"&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none",msOverflowStyle:"none"},children:(0,n.jsx)(r.K,{direction:"row",w:"calc(100% * ".concat(e.resultItems.length,")"),alignItems:"flex-start",mb:{base:5,md:10},children:e.resultItems.map((t,l)=>{var o,a;return(0,n.jsxs)(r.K,{id:"result-item-".concat(l),w:"100%",children:[(0,n.jsx)(s.x,{fontSize:"lg",children:"질문"}),(0,n.jsx)(i.I,{id:"query-item-text",onChange:e.handleQueryItemInput,"data-index":l,value:null===(o=e.queryItems[l])||void 0===o?void 0:o.text,placeholder:"질문의 내용을 작성해주세요",mb:5}),(0,n.jsx)(s.x,{fontSize:"lg",children:"답변 / 영향을 주는 결과"}),null===(a=e.queryItems[l])||void 0===a?void 0:a.answers.map((t,s)=>{var o,a;return(0,n.jsxs)(r.K,{w:"full",direction:"row",alignItems:"center",mb:5,children:[(0,n.jsx)(i.I,{id:"query-item-answer",onChange:e.handleQueryItemInput,"data-index":s,value:null===(a=e.queryItems[l])||void 0===a?void 0:null===(o=a.answers[s])||void 0===o?void 0:o.text,placeholder:"질문의 내용을 작성해주세요"}),(0,n.jsx)(x.P,{id:"query-item-result",onChange:e.handleQueryItemInput,"data-index":s,children:e.resultItems.map((e,t)=>(0,n.jsx)("option",{value:t,children:e.title},t))})]},s)})]},l)})})}),(0,n.jsx)(C,{onClick:e.submit,text:"제출"})]})}):(0,n.jsx)(n.Fragment,{})})]})};var q=S},7793:function(e,t,l){"use strict";l.d(t,{Z:function(){return n}});class n{}n.smoothScroll=(e,t,l,n)=>{if(!e)return Promise.resolve();if(t=Math.round(t),l=Math.round(l),0===(n=Math.round(n)))return e.scrollLeft=t,e.scrollTop=l,Promise.resolve();let r=Date.now(),s=r+n,i=e.scrollLeft,o=e.scrollTop,a=t-i,u=l-o,d=(e,t,l)=>{if(l<=e)return 0;if(l>=t)return 1;let n=(l-e)/(t-e);return n*n*(3-2*n)},c=e.scrollLeft,m=e.scrollTop;return new Promise(t=>{let l=()=>{let n=Date.now(),h=d(r,s,n),x=Math.round(i+a*h),f=Math.round(o+u*h);if(e.scrollLeft=x,e.scrollTop=f,n>=s||e.scrollLeft===c&&e.scrollTop===m&&(e.scrollLeft!==x||e.scrollTop!==f)){t();return}c=e.scrollLeft,m=e.scrollTop,requestAnimationFrame(l)};requestAnimationFrame(l)})},n.smoothScrollWindow=(e,t,l)=>{let n=window.scrollX,r=window.scrollY,s=e-n,i=t-r,o=performance.now();if(0===l)return window.scrollTo({left:n,top:r,behavior:"auto"}),Promise.resolve();let a=e=>{e.preventDefault()};return new Promise(e=>{let t=u=>{let d=(u-o)/l;d>1&&(d=1);let c=n+s*d,m=r+i*d;window.scrollTo({left:c,top:m,behavior:"auto"}),d<1?requestAnimationFrame(t):(window.removeEventListener("wheel",a),window.removeEventListener("touchstart",a),e())};window.addEventListener("wheel",a,{passive:!1}),window.addEventListener("touchstart",a,{passive:!1}),requestAnimationFrame(t)})}}},function(e){e.O(0,[937,949,898,774,888,179],function(){return e(e.s=9782)}),_N_E=e.O()}]);